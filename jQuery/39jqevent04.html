<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>39ì œì´ì¿¼ë¦¬-ì´ë²¤íŠ¸04</title>
    <script src="js/jquery-3.6.3.min.js"></script>
    <style>
        #canvas {
            border: 3px solid;
            margin-top: 10px;
        }
        .clear {
            display: inline-block;
            width: 20px;
            height: 20px;
            border: 1px solid #ccc;
        }
    </style>
    <script>        
        $(function() {
            let position, x, y;
            let can = document.getElementById('canvas');
            let context = can.getContext('2d'); // getContext > ì œì´ì¿¼ë¦¬ ì§€ì›ì•ˆë¨
            let lineWidth=1;
            let color="#000";
            let oldColor, oldLineWidth;
            let sw=false;
            let clearSW=false;
            // ì§€ìš°ê°œ ì´ë²¤íŠ¸
            $('.clear').click(function () {
                clearSW=!clearSW;
                if(clearSW) {
                    $(this).css('border','3px solid black');
                    $(can).css('cursor','grabbing');
                    oldColor=color;
                    oldLineWidth=lineWidth;
                    color='#fff';
                    lineWidth=20;
                }else {
                    $(this).css('border','1px solid #ccc');
                    $(can).css('cursor','default');
                    color=oldColor;
                    lineWidth=oldLineWidth;
                }
            });
            // ì„  êµµê¸° ê°’
            $('select').change(function () {
                // alert ('êµµê¸° ë³€ê²½');
                lineWidth=$('select>option:selected').val();
            });
            // ì„  ìƒ‰ìƒ ê°’
            $('.colorChange').change(function () {
                color=$(this).val();
            });
            // ìº”ë²„ìŠ¤ ì´ˆê¸°í™”
            $('button').click(function () {
                can.width = can.width; // ìº”ë²„ìŠ¤ì˜ ë„ˆë¹„ë¥¼ ê·¸ëŒ€ë¡œ ë‹¤ì‹œ ì£¼ë©´ ì´ˆê¸°í™”ë¨
            });
            // ìº”ë²„ìŠ¤ ì´ë²¤íŠ¸
            $(can).on({
                mousedown : function (event) {
                    // console.log('ìº”ë²„ìŠ¤ ìœ„ì—ì„œ ë§ˆìš°ìŠ¤ë¥¼ ëˆŒë €ìŠµë‹ˆë‹¤.');
                    sw=true;
                    position=$(this).offset();
                    x=event.pageX-position.left; // pageX,Y : ë§ˆìš°ìŠ¤í¬ì¸í„°ì˜ ìœ„ì¹˜
                    y=event.pageY-position.top;
                    context.beginPath();
                    context.moveTo(x,y);
                },
                mousemove : function (event) {
                    // console.log('ìº”ë²„ìŠ¤ ìœ„ì—ì„œ ëŒì•„ë‹¤ë‹ˆê³  ìˆìŠµë‹ˆë‹¤.');
                    if(sw) {
                        position=$(this).offset();
                        x=event.pageX-position.left;
                        y=event.pageY-position.top;
                        context.lineWidth=lineWidth;
                        context.strokeStyle=color;
                        context.lineTo(x,y); // ì›€ì§ì´ëŠ” ì¢Œí‘œê°’
                        context.stroke(); // ì„ ì´ê·¸ì–´ì§
                    }
                },
                mouseup : function (event) {
                    // console.log('ìº”ë²„ìŠ¤ ìœ„ì—ì„œ ë§ˆìš°ìŠ¤ë¥¼ ë—ìŠµë‹ˆë‹¤.');
                    sw=false;
                }
            });
        });
    </script>
</head>
<body>
    <p>ì˜¤ì´ê¹ê¸°ğŸ¥’</p>
    <span>ë¶“ì˜ ë‘ê»˜</span>
    <select>
        <option>1</option>
        <option>2</option>
        <option>3</option>
        <option>4</option>
        <option>5</option>
        <option>6</option>
        <option>7</option>
        <option>8</option>
        <option>9</option>
        <option>10</option>
        <option>11</option>
        <option>12</option>
    </select>
    <span>ë¶“ì˜ ìƒ‰ìƒ</span>
    <input type="color" class="colorChange">
    <span>ì§€ìš°ê°œ</span>
    <div class="clear"></div>
    <button>ë¦¬ì…‹</button>
    <canvas id="canvas" width="800" height="500"></canvas>
</body>
</html>